import{_ as K,d as U,r as c,v as C,f as a,g as t,h as n,c as I,w as b,k as r,j as B,S as M,U as R,F as L,i as F,N as _,n as j,z as Y,t as w,q as z,s as x,V as N}from"./index.81e580c0.js";import{M as p,G as Q,I as m}from"./index.72dcaa66.js";import{i as P}from"./index.ecaa28e3.js";import{P as D}from"./PictureFilled.48663507.js";const J=l=>(z("data-v-58c20049"),l=l(),x(),l),H={class:"upload"},G={class:"upload-content"},T=J(()=>n("div",{class:"upload-content-title"},"\u4E0A\u4F20",-1)),Z={class:"upload-list"},q={class:"mb-2 avatar-uploader"},O=["src"],X={key:1},W=J(()=>n("div",{class:"ant-upload-text"},"\u4E0A\u4F20\u6A21\u578B",-1)),V=["onClick"],$=["title"],AA={key:1,class:"cursor-pointer flex upload-list-err",style:{color:"rgba(95, 95, 96)"}},eA=U({name:"index",props:{selectedModelPath:null},emits:["upload","clickModel"],setup(l,{emit:u}){const f=c(p.UploadModelList),i=c(!1),h=c(""),v=A=>{if(!(A.file.name.endsWith(".gltf")||A.file.name.endsWith(".glb"))){N.error("\u8BF7\u4E0A\u4F20 GLTF/GLB \u6A21\u578B\u6587\u4EF6!"),i.value=!1;return}if(A.file.status==="uploading"){i.value=!0;return}A.file&&k(A.file),A.file.status==="error"&&(i.value=!1,N.error("upload error"))};async function k(A){let o=URL.createObjectURL(A);if(A.name.includes(".gltf")){let E=await Q.ins.engine.resourceManager.load({type:P.JSON,url:o});E.buffers.concat(E.images).forEach(e=>{if(!e)return;let{uri:s}=e;if(s){let g=s.lastIndexOf("/");g>-1&&(s=s.substr(g+1))}});const d=new Blob([JSON.stringify(E)]);o=`${URL.createObjectURL(d)}#.gltf`}else o=`${o}#.glb`;Q.ins.engine.once(m.MODEL_LOADED,async()=>{setTimeout(async()=>{p.addUploadModel({name:A.name,img:await Q.ins.screenshot(200,200,!0,1,!1),path:o})},300)}),u("upload",o)}const S=A=>!1,y=async A=>{Q.ins.engine.dispatch(m.SAVE_ALL_CONFIG),u("clickModel",A)};return(A,o)=>{const E=C("a-upload"),d=C("a-image");return a(),t("div",H,[n("div",G,[T,n("div",Z,[n("div",q,[I(E,{name:"avatar","list-type":"picture-card","show-upload-list":!1,action:"/","before-upload":S,onChange:v},{default:b(()=>[h.value?(a(),t("img",{key:0,src:h.value,alt:"avatar"},null,8,O)):(a(),t("div",X,[i.value?(a(),r(B(M),{key:0})):(a(),r(B(R),{key:1})),W]))]),_:1})]),(a(!0),t(L,null,F(f.value,(e,s)=>(a(),t("div",{onClick:_(g=>y(e.path),["stop"]),class:"box-border mb-2 upload-list-item",key:s},[n("div",{class:j([{border:e.path===l.selectedModelPath},"overflow-hidden rounded-md w-100px h-100px"]),title:e.name},[e.img?(a(),r(d,{key:0,class:"cursor-pointer avatar",preview:!1,src:e.img,alt:e.name,fallback:"data:image/png;base64,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"},null,8,["src","alt"])):(a(),t("div",AA,[I(B(D),{style:{"font-size":"50px"}}),Y(" "+w(e.name),1)]))],10,$)],8,V))),128))])])])}}});var nA=K(eA,[["__scopeId","data-v-58c20049"]]);export{nA as default};
