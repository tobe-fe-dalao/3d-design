import{_ as y,d as K,r as g,v as h,f as a,g as t,h as l,c as C,w as U,k as c,j as r,S as b,U as R,F as M,i as F,N as L,n as _,z as j,t as Y,q as z,s as w,V as I}from"./index.5a43dd73.js";import{M as N,G as p,I as x}from"./index.4bbb8b30.js";import{i as P}from"./index.ecaa28e3.js";import{P as H}from"./PictureFilled.e51b5278.js";const J=n=>(z("data-v-45efa158"),n=n(),w(),n),G={class:"upload"},D={class:"upload-content"},T=J(()=>l("div",{class:"upload-content-title"},"\u4E0A\u4F20",-1)),Z={class:"upload-list"},q={class:"mb-2 avatar-uploader"},O=["src"],X={key:1},W=J(()=>l("div",{class:"ant-upload-text"},"\u4E0A\u4F20\u6A21\u578B",-1)),V=["onClick"],$=["title"],AA={key:1,class:"cursor-pointer flex upload-list-err",style:{color:"rgba(95, 95, 96)"}},eA=K({name:"index",props:{selectedModelPath:null},emits:["upload","clickModel"],setup(n,{emit:B}){const m=g(N.UploadModelList),Q=g(!1),u=g(""),f=A=>{if(!(A.file.name.endsWith(".gltf")||A.file.name.endsWith(".glb"))){I.error("\u8BF7\u4E0A\u4F20 GLTF/GLB \u6A21\u578B\u6587\u4EF6!"),Q.value=!1;return}if(A.file.status==="uploading"){Q.value=!0;return}A.file&&v(A.file),A.file.status==="error"&&(Q.value=!1,I.error("upload error"))};async function v(A){let o=URL.createObjectURL(A);if(A.name.includes(".gltf")){let E=await p.ins.engine.resourceManager.load({type:P.JSON,url:o});E.buffers.concat(E.images).forEach(e=>{if(!e)return;let{uri:s}=e;if(s){let i=s.lastIndexOf("/");i>-1&&(s=s.substr(i+1))}});const d=new Blob([JSON.stringify(E)]);o=`${URL.createObjectURL(d)}#.gltf`}else o=`${o}#.glb`;N.addUploadModel({name:A.name,path:o}),B("upload",o)}const k=A=>!1,S=async A=>{p.ins.engine.dispatch(x.SAVE_ALL_CONFIG),B("clickModel",A)};return(A,o)=>{const E=h("a-upload"),d=h("a-image");return a(),t("div",G,[l("div",D,[T,l("div",Z,[l("div",q,[C(E,{name:"avatar","list-type":"picture-card","show-upload-list":!1,action:"/","before-upload":k,onChange:f},{default:U(()=>[u.value?(a(),t("img",{key:0,src:u.value,alt:"avatar"},null,8,O)):(a(),t("div",X,[Q.value?(a(),c(r(b),{key:0})):(a(),c(r(R),{key:1})),W]))]),_:1})]),(a(!0),t(M,null,F(m.value,(e,s)=>(a(),t("div",{onClick:L(i=>S(e.path),["stop"]),class:"box-border mb-2 upload-list-item",key:s},[l("div",{class:_([{border:e.path===n.selectedModelPath},"overflow-hidden rounded-md w-100px h-100px"]),title:e.name},[e.img?(a(),c(d,{key:0,class:"cursor-pointer avatar",preview:!1,src:e.img,alt:e.name,fallback:"data:image/png;base64,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"},null,8,["src","alt"])):(a(),t("div",AA,[C(r(H),{style:{"font-size":"50px"}}),j(" "+Y(e.name),1)]))],10,$)],8,V))),128))])])])}}});var lA=y(eA,[["__scopeId","data-v-45efa158"]]);export{lA as default};
